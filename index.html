<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <title>EffortTapper</title>
</head>

<body>
    <main>
        <h1>Education screen</h1>

        <br>
        <h3>*Here will be explanation images*</h3>
        <br>
        <br>
        <div class="wrapper">
            <h3>It's your uniq code</h3>
            <h4>Click for copy to clipboard and in couple of seconds you will start the game</h4>
        </div>
        <div class="tooltip">
            <span class="tooltiptext" id="tooltip">Copy to clipboard</span>
            <input type="text" id="uniqCode" onclick="handleCopyClick()" onmouseout="outFunc()">
        </div>
    </main>

    <script type=" text/javascript">
        const myInput = document.getElementById("uniqCode");
        const UUID = getUniqueId()

        myInput.value = UUID

        function handleCopyClick() {
            myInput.select();
            myInput.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(myInput.value);
            
            const tooltip = document.getElementById("tooltip");
            tooltip.innerHTML = `<b>Copied: </b> ${myInput.value}`;

            const searchParams = new URLSearchParams(window.location.search);
            searchParams.set("UUID", UUID);

            setTimeout(() => {
                window.location.href = `./game.html?${searchParams.toString()}`;
            }, 1500)
        }
        function getUniqueId () {
            const dateString = Date.now().toString(36);
            const randomness = Math.random().toString(36).substr(2);
            return dateString + randomness;
            };
        function outFunc() {
            const tooltip = document.getElementById("uniqCode");
            tooltip.innerHTML = "Copy to clipboard";
        }
    </script>

</body>

</html>